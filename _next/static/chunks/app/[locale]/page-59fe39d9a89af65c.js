(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[61],{91384:function(e,o,n){Promise.resolve().then(n.bind(n,34327)),Promise.resolve().then(n.bind(n,21953))},21953:function(e,o,n){"use strict";n.d(o,{default:function(){return v}});var t=n(57437),l=n(2265),i=n(63395),a=n(93999),s=n(79593),r=n(77744),u=n(93996),d=n(5892),c=n(94648),m=l.memo(e=>{let o=(0,s.dD)(),n=(0,r.YP)(),i=(e,o,t)=>{var l,i;let a=null,s=Math.pow(2,(null==n?void 0:n.getZoom())||15),r=null==n?void 0:null===(l=n.getProjection())||void 0===l?void 0:l.fromLatLngToPoint(e),u=new google.maps.Point(o/s,t/s);return r&&(a=null==n?void 0:null===(i=n.getProjection())||void 0===i?void 0:i.fromPointToLatLng(new google.maps.Point(r.x-u.x,r.y+u.y))),a||null},a=l.useCallback(()=>{e.onPress&&e.onPress(e);let t=o(),l=i(new google.maps.LatLng(e.lat,e.lon),t?0:-155.5,t?(window.innerHeight-64)/1.5/2:0);l&&(null==n||n.panTo(l))},[]);return e.facility===u._.BIKE_STATION?(0,t.jsx)(d.Z,{...e,onPress:a}):(0,t.jsx)(c.Z,{...e,onPress:a})}),f=n(63874),v=()=>{let{queryParameters:e,setQueryParameters:o}=(0,f.q)(),n=(0,s.YZ)(),{stations:r,waterFountains:u,lastUpdated:d,isLoading:c,refetch:v}=(0,s.Rx)(),[g,p]=l.useState(void 0),[C,P]=(0,s.$r)({timeout:3500},e=>{a.Am.error(null==e?void 0:e.message)}),b=l.useMemo(()=>({lat:parseFloat("43.7292717"),lng:parseFloat("-79.6082231")}),[]),k=l.useMemo(()=>C.latitude&&C.longitude?{lat:C.latitude,lng:C.longitude}:void 0,[C.timestamp,C.latitude,C.longitude]);return l.useEffect(()=>{P()},[]),l.useEffect(()=>{n||v()},[e]),(0,t.jsxs)(i.b6,{onClick:()=>p(void 0),mapContainerClassName:"w-full h-full relative",zoom:15,defaultCenter:b,center:k,options:{backControl:!0,backControlOptions:{onClick:P,isLoading:(null==C?void 0:C.loading)||void 0},fullscreenControl:!1,streetViewControl:!1,zoomControl:!1,mapId:"ef34fc3265e9becb",mapTypeControl:!1,clickableIcons:!1},children:[(0,t.jsx)(i.lD,{className:"hidden md:flex",isLoading:c,lastUpdated:d,queryParameters:e,onSubmit:o}),[...u||[],...r||[]].map(e=>(0,l.createElement)(m,{...e,key:e.station_id,onPress:p,active:e.facility===(null==g?void 0:g.facility)&&e.station_id===(null==g?void 0:g.station_id)})),(0,t.jsx)(i.zC,{geolocation:C,visible:void 0!==g,marker:g,onCancel:()=>p(void 0)})]})}}},function(e){e.O(0,[910,990,373,970,39,15,49,827,971,23,744],function(){return e(e.s=91384)}),_N_E=e.O()}]);